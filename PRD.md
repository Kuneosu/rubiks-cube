# 루빅스 큐브 웹 애플리케이션 PRD

## 제품 비전
웹 브라우저에서 실행되는 고성능 3D 루빅스 큐브 시뮬레이터. 실제 큐브와 동일한 조작감, 스피드큐빙 타이머, 학습 도구를 제공하는 종합 플랫폼.

## 목표 사용자
- **초급자**: 큐브 해결법을 배우고자 하는 사용자
- **중급자**: 실력 향상을 원하는 큐버
- **고급자**: 스피드큐빙 연습이 필요한 전문가
- **교육자**: 큐브를 교육 도구로 활용하는 강사

## 핵심 기능 요구사항

### 1. 3D 큐브 렌더링
#### 1.1 기본 구조
- 3x3x3 표준 큐브 구현
- 27개 큐블렛 (코너 8개, 엣지 12개, 센터 6개, 코어 1개)
- 실제 큐브와 동일한 메커니즘

#### 1.2 비주얼
- 표준 색상 구성 (흰색, 노란색, 빨강, 주황, 초록, 파랑)
- 둥근 모서리와 실감나는 재질
- 그림자와 반사 효과
- 큐블렛 간 간격 조절 가능 (0~5mm)

#### 1.3 애니메이션
- 부드러운 90도 회전 (200ms)
- 180도 회전 지원
- 동시 다중 면 회전 가능
- 애니메이션 속도 조절 (50ms~500ms)

### 2. 사용자 조작

#### 2.1 키보드 컨트롤 (Singmaster + Stewart Smith 확장)
**기본 회전 (Singmaster 표준)**
- R/L/U/D/F/B: 시계방향 90도
- Shift + 키: 반시계방향 90도  
- 2 + 키: 180도 회전

**Stewart Smith 스타일 확장**
- r/l/u/d/f/b: 반시계방향 90도 (소문자)
- M/E/S: 중간층 회전 (Middle/Equatorial/Standing)
- x/y/z: 큐브 전체 회전

**제어 키**
- Space: 타이머 시작/정지
- Esc: 큐브 리셋
- Ctrl+Z: 실행 취소
- Ctrl+Y: 재실행
- S: 자동 섞기

#### 2.2 마우스 컨트롤
- 드래그: 카메라 회전 (OrbitControls)
- 휠: 줌 인/아웃 (거리 3~15)
- 더블클릭: 카메라 리셋
- 우클릭: 컨텍스트 메뉴

#### 2.3 터치 컨트롤 (모바일)
- 스와이프: 면 회전
- 핀치: 줌 인/아웃
- 두 손가락 드래그: 카메라 회전

### 3. 타이머 기능

#### 3.1 기본 타이머
- 스페이스바 홀드 프라이밍
- 녹색 표시로 준비 상태 알림
- 밀리초 단위 정확도
- 자동 정지 (큐브 해결 감지)

#### 3.2 통계
- 현재 시간
- 베스트 타임
- 평균 (Ao5, Ao12, Ao100)
- 세션별 기록 관리
- 그래프 시각화

#### 3.3 검사 모드
- WCA 규정 15초 검사 시간
- 8초, 12초 경고음
- +2, DNF 페널티 적용

### 4. 자동 섞기

#### 4.1 섞기 알고리즘
- WCA 표준 25개 이동
- 랜덤 상태 스크램블
- 연속 같은 면 회전 방지
- 반대 면 연속 회전 최적화

#### 4.2 섞기 옵션
- 이동 수 조절 (10~50)
- 애니메이션 속도 (1x, 2x, 4x, 즉시)
- 섞기 시퀀스 표시/숨김
- 커스텀 시퀀스 입력

### 5. 히스토리 관리

#### 5.1 이동 기록
- 모든 이동 자동 기록
- 최대 1000개 이동 저장
- 표준 큐브 표기법 사용
- 실시간 히스토리 표시

#### 5.2 Undo/Redo
- Command Pattern 구현
- 무제한 Undo/Redo
- 키보드 단축키 지원
- 히스토리 분기 관리

#### 5.3 세션 관리
- 로컬 스토리지 저장
- 세션별 구분
- 내보내기/가져오기 기능
- 클라우드 동기화 (선택)

### 6. 학습 도구

#### 6.1 해법 가이드
- Layer-by-Layer 메소드
- CFOP 메소드
- 단계별 시각화
- 다음 이동 힌트

#### 6.2 패턴 연습
- OLL (57개 케이스)
- PLL (21개 케이스)
- F2L (41개 케이스)
- 패턴 인식 훈련

#### 6.3 알고리즘 실행
- 알고리즘 입력창
- 실행 및 되돌리기
- 속도 조절
- 반복 실행

### 7. 커스터마이징

#### 7.1 외관 설정
- 색상 테마 변경
- 스티커/스티커리스 선택
- 큐브 크기 조절
- 배경 테마

#### 7.4 고급 시각화 모드 (Stewart Smith 영감)
- **와이어프레임 모드**: 큐브 구조 시각화
- **익스플로드 뷰**: 큐블렛 분해 보기 (간격 조절 가능)
- **투명도 조절**: 내부 구조 확인
- **회전 경로 표시**: 애니메이션 궤적 시각화
- **그룹 하이라이팅**: 선택된 큐블렛 그룹 강조

#### 7.2 조작 설정
- 키 매핑 변경
- 마우스 감도 조절
- 애니메이션 속도
- 사운드 효과

#### 7.3 타이머 설정
- 검사 시간 on/off
- 평균 계산 방식
- 시간 표시 형식
- 음성 알림

### 8. 멀티플레이어 (Phase 2)

#### 8.1 대전 모드
- 실시간 1:1 대전
- 토너먼트 모드
- 관전 기능
- 채팅

#### 8.2 협동 모드
- 팀 릴레이
- 동시 해결
- 교육 모드

### 9. 성능 요구사항

#### 9.1 렌더링
- 60 FPS 유지
- 지연 시간 <16ms
- 부드러운 애니메이션

#### 9.2 로딩
- 초기 로드 <3초
- 에셋 지연 로딩
- 프로그레시브 향상

#### 9.3 메모리
- 메모리 사용 <100MB
- 메모리 누수 방지
- 가비지 컬렉션 최적화

### 10. 접근성

#### 10.1 시각 접근성
- 고대비 모드
- 색맹 모드
- 큐블렛 번호 표시
- 확대/축소 기능

#### 10.2 모터 접근성
- 키보드 전용 모드
- 단순화된 컨트롤
- 자동 회전 옵션
- 속도 조절

#### 10.3 인지 접근성
- 단계별 가이드
- 시각적 힌트
- 실행 취소 기능
- 연습 모드

## 기술 요구사항

### 필수 기술 스택
- React 18+
- Three.js / React Three Fiber
- TypeScript
- Vite
- Zustand

### 브라우저 지원
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+
- 모바일 브라우저

### 반응형 디자인
- 데스크톱: 1920x1080 기준
- 태블릿: 768px~1024px
- 모바일: 320px~767px

### PWA 지원
- 오프라인 작동
- 홈 화면 추가
- 푸시 알림
- 백그라운드 동기화

## 출시 계획

### ✅ 완료된 기능 (Current Implementation)
- **3D 큐브 렌더링**: React Three Fiber + Three.js
- **16-카메라 그리드**: 4x4 카메라 매트릭스 시스템
- **QWEASD 키 매핑**: 직관적인 큐브 조작
- **스피드큐빙 타이머**: WCA 호환 타이머 시스템
- **이중 모드**: 일반 모드 ↔ 스피드큐빙 모드
- **히스토리 시스템**: Undo/Redo + 실시간 히스토리 바
- **자동 해결 감지**: 시각적 색상 기반 검증
- **스크램블 시스템**: 25-이동 랜덤 스크램블

### 🔄 진행 중인 개선사항
- 성능 최적화: 메모리 관리 및 렌더링 효율성
- 모바일 최적화: 터치 제스처 및 반응형 UI
- 접근성 향상: 키보드 네비게이션 및 스크린 리더 지원

### 📋 향후 계획
- **고급 통계**: 세션별 시간 추적 및 평균 계산
- **알고리즘 학습**: OLL/PLL 패턴 가이드
- **커스터마이징**: 색상 테마 및 외관 설정
- **PWA 지원**: 오프라인 작동 및 설치 가능

### Phase 4 (고급 기능) - Stewart Smith 영감
- **디버깅 모드**: 개발자 도구 통합으로 실시간 상태 확인
- **Fluent API**: 메서드 체이닝으로 고급 사용자를 위한 스크립팅 인터페이스
- **유연한 그룹핑**: 임의의 큐블렛 그룹 생성 및 조작
- **실험적 기능**: 와이어프레임 모드, 익스플로드 뷰, 알고리즘 시각화
- **교육용 도구**: 회전 경로 시각화, 패턴 탐색 모드

## 성공 지표

### 사용자 참여
- DAU/MAU 비율 >25%
- 평균 세션 시간 >10분
- 세션당 해결 횟수 >5회

### 성능
- 로드 시간 <3초
- 60 FPS 달성률 >95%
- 크래시율 <0.1%

### 품질
- 버그 보고 <10건/주
- 사용자 평점 >4.5
- 리텐션 30일 >40%